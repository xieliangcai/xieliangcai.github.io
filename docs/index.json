[{"categories":["git"],"content":"git下载慢解决方法 如下图三步，开放本机的代理端口 然后配置git git config --global http.proxy 'http://127.0.0.1:9300'\rgit config --list # 查看是否成功\r","date":"2023-02-27","objectID":"/git%E4%B8%8B%E8%BD%BD%E5%BE%88%E6%85%A2%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/:0:1","tags":["git"],"title":"git 用了代理后还是下载慢","uri":"/git%E4%B8%8B%E8%BD%BD%E5%BE%88%E6%85%A2%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"},{"categories":["prometheus"],"content":"Prometheus安装 ","date":"2023-02-25","objectID":"/prometheus%E5%AE%89%E8%A3%85/:1:0","tags":["监控","prometheus"],"title":"Prometheus安装","uri":"/prometheus%E5%AE%89%E8%A3%85/"},{"categories":["prometheus"],"content":"下载解压 mkdir -p /opt/prometheus wget https://github.com/prometheus/prometheus/releases/download/v2.37.1/prometheus-2.37.1.linux-amd64.tar.gz tar xf prometheus-2.37.1.linux-amd64.tar.gz cp -far prometheus-2.37.1.linux-amd64/* /opt/prometheus/ ","date":"2023-02-25","objectID":"/prometheus%E5%AE%89%E8%A3%85/:1:1","tags":["监控","prometheus"],"title":"Prometheus安装","uri":"/prometheus%E5%AE%89%E8%A3%85/"},{"categories":["prometheus"],"content":"将服务挂使用systemd 托管 cat \u003c\u003cEOF \u003e/etc/systemd/system/prometheus.service [Unit] Description=\"prometheus\" Documentation=https://prometheus.io/ After=network.target [Service] Type=simple ExecStart=/opt/prometheus/prometheus --config.file=/opt/prometheus/prometheus.yml --storage.tsdb.path=/opt/prometheus/data --web.enable-lifecycle --enable-feature=remote-write-receiver --query.lookback-delta=2m --web.enable-admin-api Restart=on-failure SuccessExitStatus=0 LimitNOFILE=65536 StandardOutput=syslog StandardError=syslog SyslogIdentifier=prometheus [Install] WantedBy=multi-user.target EOF systemctl enable prometheus systemctl start prometheus systemctl status prometheus ","date":"2023-02-25","objectID":"/prometheus%E5%AE%89%E8%A3%85/:1:2","tags":["监控","prometheus"],"title":"Prometheus安装","uri":"/prometheus%E5%AE%89%E8%A3%85/"},{"categories":["prometheus"],"content":"启动参数 --config.file=/opt/prometheus/prometheus.yml 指定 Prometheus 的配置文件路径 --storage.tsdb.path=/opt/prometheus/data 指定 Prometheus 时序数据的硬盘存储路径 --web.enable-lifecycle 启用生命周期管理相关的 API，比如调用 /-/reload 接口就需要启用该项 --enable-feature=remote-write-receiver 启用 remote write 接收数据的接口，启用该项之后，categraf、grafana-agent 等 agent 就可以通过 /api/v1/write 接口推送数据给 Prometheus --query.lookback-delta=2m 即时查询在查询当前最新值的时候，只要发现这个参数指定的时间段内有数据，就取最新的那个点返回，这个时间段内没数据，就不返回了 --web.enable-admin-api 启用管理性 API，比如删除时间序列数据的 /api/v1/admin/tsdb/delete_series 接口 ","date":"2023-02-25","objectID":"/prometheus%E5%AE%89%E8%A3%85/:1:3","tags":["监控","prometheus"],"title":"Prometheus安装","uri":"/prometheus%E5%AE%89%E8%A3%85/"},{"categories":["prometheus"],"content":"安装node-exporter 下载地址 https://prometheus.io/download/#node_exporter 解压直接运行 nohup ./node_exporter \u0026\u003e output.log \u0026 编辑prometheus.yml,具体内容如下，targets是个列表， 如果有多个在列表里添加即可 scrape_configs: - job_name: 'prometheus' static_configs: - targets: ['localhost:9090'] - job_name: 'node_exporter' static_configs: - targets: ['localhost:9100'] 重新加载Prometheus，让其重新加载配置 通过 ps -ef | grep prometheus 找到prometheus的pid kill -HUP prometheuspid 注意: -HUP 是重新加载进程的意思 ","date":"2023-02-25","objectID":"/prometheus%E5%AE%89%E8%A3%85/:1:4","tags":["监控","prometheus"],"title":"Prometheus安装","uri":"/prometheus%E5%AE%89%E8%A3%85/"},{"categories":null,"content":"背景 Prometheus 通过snmp-exporter采集网络设备， 但snmp-exporter是依赖snmp.yaml 件取采集对应应的oid，本此记录snmp.yaml 生成的过程 ","date":"2023-02-24","objectID":"/%E7%94%9F%E6%88%90snmp.yaml%E6%96%87%E4%BB%B6/:0:1","tags":["snmp","网络协议"],"title":"Prometheus snmp采集生成 snmp.yaml文件","uri":"/%E7%94%9F%E6%88%90snmp.yaml%E6%96%87%E4%BB%B6/"},{"categories":null,"content":"做法 安装generator # Debian 系统. sudo apt-get install unzip build-essential libsnmp-dev # Debian-based distros # Redhat 系统 sudo yum install gcc gcc-g++ make net-snmp net-snmp-utils net-snmp-libs net-snmp-devel # RHEL-based distros go get github.com/prometheus/snmp_exporter/generator cd ${GOPATH-$HOME/go}/src/github.com/prometheus/snmp_exporter/generator go build make mibs 写generator.yml 文件 modules: module_name: # 模块名 walk: # 下面是需要采集指标的oid - 1.3.6.1.2.1.2 # Same as \"interfaces\" - sysUpTime # Same as \"1.3.6.1.2.1.1.3\" - 1.3.6.1.2.1.31.1.1.1.6.40 # Instance of \"ifHCInOctets\" with index \"40\" ","date":"2023-02-24","objectID":"/%E7%94%9F%E6%88%90snmp.yaml%E6%96%87%E4%BB%B6/:0:2","tags":["snmp","网络协议"],"title":"Prometheus snmp采集生成 snmp.yaml文件","uri":"/%E7%94%9F%E6%88%90snmp.yaml%E6%96%87%E4%BB%B6/"}]